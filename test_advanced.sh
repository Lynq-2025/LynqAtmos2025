#!/bin/bash\n\n# Green Signal Advanced Challenge - Quick Test Script\n# Run this to verify everything is set up correctly\n\necho \"üîç Green Signal Advanced Challenge - Setup Test\"\necho \"================================================\"\n\n# Test 1: Check Python\necho \"\"\necho \"[1/6] Checking Python...\"\npython3 --version || { echo \"‚ùå Python3 not found\"; exit 1; }\necho \"‚úÖ Python3 found\"\n\n# Test 2: Check dependencies\necho \"\"\necho \"[2/6] Checking dependencies...\"\npython3 -c \"import fastapi; import uvicorn\" || { echo \"‚ùå FastAPI/uvicorn not installed\"; exit 1; }\necho \"‚úÖ FastAPI and uvicorn installed\"\n\n# Test 3: Check email data\necho \"\"\necho \"[3/6] Checking email data...\"\nif [ -f \"data/emails.json\" ]; then\n  count=$(python3 -c \"import json; data=json.load(open('data/emails.json')); print(len(data))\")\n  echo \"‚úÖ Found data/emails.json with $count emails\"\nelse\n  echo \"‚ö†Ô∏è  data/emails.json not found - you may need to run generate_messages_with_labels.py\"\nfi\n\n# Test 4: Check workflow file\necho \"\"\necho \"[4/6] Checking workflow file...\"\nif [ -f \"workflows/green-signal_advanced_agentic.json\" ]; then\n  nodes=$(python3 -c \"import json; w=json.load(open('workflows/green-signal_advanced_agentic.json')); print(len(w['nodes']))\")\n  echo \"‚úÖ Found workflow with $nodes nodes\"\nelse\n  echo \"‚ùå Workflow file not found\"\n  exit 1\nfi\n\n# Test 5: Check main_advanced.py\necho \"\"\necho \"[5/6] Checking main_advanced.py...\"\nif [ -f \"main_advanced.py\" ]; then\n  echo \"‚úÖ main_advanced.py exists\"\nelse\n  echo \"‚ùå main_advanced.py not found\"\n  exit 1\nfi\n\n# Test 6: Start backend and test endpoints\necho \"\"\necho \"[6/6] Starting backend server (will run for 5 seconds)...\"\npython3 -m uvicorn main_advanced:app --host 0.0.0.0 --port 3000 > /tmp/server.log 2>&1 &\nSERVER_PID=$!\nsleep 2\n\nif ps -p $SERVER_PID > /dev/null; then\n  echo \"‚úÖ Server started (PID: $SERVER_PID)\"\n  \n  # Test health endpoint\n  echo \"\"\n  echo \"Testing /health endpoint...\"\n  curl -s http://localhost:3000/health | python3 -m json.tool > /dev/null && echo \"‚úÖ /health works\" || echo \"‚ùå /health failed\"\n  \n  # Test tool endpoint\n  echo \"\"\n  echo \"Testing /api/v2/tools/domain-reputation endpoint...\"\n  result=$(curl -s -X POST http://localhost:3000/api/v2/tools/domain-reputation \\\n    -H \"Content-Type: application/json\" \\\n    -d '{\"domain\": \"google.com\"}')\n  echo \"Response: $result\"\n  echo \"‚úÖ Tool endpoint works\"\n  \n  # Stop server\n  kill $SERVER_PID\n  echo \"\"\n  echo \"‚úÖ Server stopped\"\nelse\n  echo \"‚ùå Failed to start server\"\n  cat /tmp/server.log\n  exit 1\nfi\n\necho \"\"\necho \"================================================\"\necho \"‚úÖ ALL CHECKS PASSED!\"\necho \"\"\necho \"Next steps:\"\necho \"1. Start backend: python3 -m uvicorn main_advanced:app --host 0.0.0.0 --port 3000\"\necho \"2. Open n8n and import: workflows/green-signal_advanced_agentic.json\"\necho \"3. Configure OpenAI API key in LLM nodes\"\necho \"4. Click Execute on 'Start Advanced Agent'\"\necho \"\"\necho \"For detailed instructions, see: SOLVE_STEP_BY_STEP.md\"\n"